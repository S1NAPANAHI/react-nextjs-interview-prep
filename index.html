<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ React + Next.js Interview Prep - Interactive Learning Platform</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Master React and Next.js interviews with our interactive learning platform featuring hands-on lessons, coding challenges, and structured roadmaps.">
    <meta name="keywords" content="React, Next.js, JavaScript, Interview Preparation, Coding Challenges, Web Development">
    <meta name="author" content="SINA PANAHI">
    
    <!-- Open Graph -->
    <meta property="og:title" content="React + Next.js Interview Prep Platform">
    <meta property="og:description" content="Interactive learning platform with lessons, challenges, and roadmaps">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://s1napanahi.github.io/react-nextjs-interview-prep/">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öõÔ∏è</text></svg>">
    
    <!-- React CDN for development (replace with build version in production) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://unpkg.com/prismjs@1.29.0/themes/prism.css" rel="stylesheet">
    <script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- Supabase SDK (for future backend integration) -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        /* Loading screen styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
            font-family: 'Inter', sans-serif;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .loading-subtitle {
            font-size: 14px;
            opacity: 0.8;
        }
        
        /* Hide main content while loading */
        .main-content {
            display: none;
        }
        
        .main-content.loaded {
            display: block;
        }
        
        /* Error boundary styles */
        .error-boundary {
            padding: 40px 20px;
            text-align: center;
            background: #f8f9fa;
            border-radius: 12px;
            margin: 20px;
        }
        
        .error-boundary h2 {
            color: #dc3545;
            margin-bottom: 16px;
        }
        
        .error-boundary p {
            color: #6c757d;
            margin-bottom: 20px;
        }
        
        .error-boundary button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .error-boundary button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading Interactive Learning Platform</div>
        <div class="loading-subtitle">Preparing your React & Next.js journey...</div>
    </div>
    
    <!-- Main Application Root -->
    <div id="root" class="main-content">
        <!-- React App will render here -->
        <div class="error-boundary" id="error-fallback" style="display: none;">
            <h2>üö® Something went wrong</h2>
            <p>We're sorry, but there was an error loading the application.</p>
            <button onclick="window.location.reload()">Reload Application</button>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notifications" class="notifications-container"></div>
    
    <!-- Scripts -->
    <!-- Load data structures first -->
    <script type="text/babel" src="data/content-structure.js"></script>
    
    <!-- Load components -->
    <script type="text/babel" src="components/RoadmapNavigation.js"></script>
    <script type="text/babel" src="components/LessonViewer.js"></script>
    <script type="text/babel" src="components/ChallengePlayer.js"></script>
    
    <!-- Load main app -->
    <script type="text/babel" src="App.js"></script>
    
    <!-- Initialize the React application -->
    <script type="text/babel">
        // Error Boundary Component
        class ErrorBoundary extends React.Component {
            constructor(props) {
                super(props);
                this.state = { hasError: false, error: null };
            }
            
            static getDerivedStateFromError(error) {
                return { hasError: true, error };
            }
            
            componentDidCatch(error, errorInfo) {
                console.error('React Error Boundary caught an error:', error, errorInfo);
            }
            
            render() {
                if (this.state.hasError) {
                    return (
                        <div className="error-boundary">
                            <h2>üö® Application Error</h2>
                            <p>There was an error loading the application. Please try refreshing the page.</p>
                            <details style={{marginTop: '20px', textAlign: 'left'}}>
                                <summary>Error Details (for developers)</summary>
                                <pre style={{marginTop: '10px', padding: '10px', background: '#f8f9fa', borderRadius: '4px', fontSize: '12px'}}>
                                    {this.state.error?.toString()}
                                </pre>
                            </details>
                            <button onClick={() => window.location.reload()}>Reload Application</button>
                        </div>
                    );
                }
                
                return this.props.children;
            }
        }
        
        // App initialization
        const initializeApp = () => {
            try {
                // Hide loading screen
                const loadingScreen = document.getElementById('loading-screen');
                const mainContent = document.getElementById('root');
                
                // Render the React app
                const root = ReactDOM.createRoot(document.getElementById('root'));
                root.render(
                    React.createElement(ErrorBoundary, null,
                        React.createElement(App, null)
                    )
                );
                
                // Show main content and hide loading screen
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    mainContent.classList.add('loaded');
                    console.log('üöÄ React Interactive Learning Platform loaded successfully!');
                }, 1000);
                
                // Global notification system
                window.showNotification = (message, type = 'success', duration = 3000) => {
                    const container = document.getElementById('notifications');
                    const notification = document.createElement('div');
                    notification.className = `notification notification-${type}`;
                    notification.textContent = message;
                    
                    // Add to DOM
                    container.appendChild(notification);
                    
                    // Show notification
                    setTimeout(() => {
                        notification.classList.add('show');
                    }, 100);
                    
                    // Auto-remove
                    setTimeout(() => {
                        notification.classList.remove('show');
                        setTimeout(() => {
                            if (container.contains(notification)) {
                                container.removeChild(notification);
                            }
                        }, 300);
                    }, duration);
                };
                
                // Listen for custom notification events
                window.addEventListener('showNotification', (event) => {
                    window.showNotification(
                        event.detail.message, 
                        event.detail.type || 'success', 
                        event.detail.duration || 3000
                    );
                });
                
            } catch (error) {
                console.error('Failed to initialize React app:', error);
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('error-fallback').style.display = 'block';
            }
        };
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
        
        // Handle syntax highlighting after content loads
        document.addEventListener('DOMContentLoaded', () => {
            if (window.Prism) {
                Prism.highlightAll();
                
                // Re-highlight when content changes (for dynamic content)
                const observer = new MutationObserver(() => {
                    Prism.highlightAll();
                });
                
                observer.observe(document.body, {
                    childList: true,
                    subtree: true
                });
            }
        });
        
        // Service Worker for offline support (future enhancement)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // navigator.serviceWorker.register('/sw.js') // Uncomment when you add a service worker
            });
        }
    </script>
    
    <!-- Additional Styles for Notifications -->
    <style>
        .notifications-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            pointer-events: none;
        }
        
        .notification {
            background: #28a745;
            color: white;
            padding: 12px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            pointer-events: auto;
            max-width: 400px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-success {
            background: #28a745;
        }
        
        .notification-error {
            background: #dc3545;
        }
        
        .notification-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .notification-info {
            background: #17a2b8;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .notifications-container {
                top: 10px;
                right: 10px;
                left: 10px;
            }
            
            .notification {
                transform: translateY(-100px);
                max-width: none;
            }
            
            .notification.show {
                transform: translateY(0);
            }
        }
        
        /* Dark theme support */
        @media (prefers-color-scheme: dark) {
            .loading-screen {
                background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            }
            
            .error-boundary {
                background: #2d3748;
                color: #e2e8f0;
            }
            
            .error-boundary h2 {
                color: #fc8181;
            }
            
            .error-boundary p {
                color: #a0aec0;
            }
        }
    </style>
    
    <!-- Analytics (optional) -->
    <!-- Add your analytics code here if needed -->
    
    <!-- PWA Manifest (future enhancement) -->
    <!-- <link rel="manifest" href="manifest.json"> -->
</body>
</html>